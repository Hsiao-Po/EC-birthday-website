<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>ç”Ÿæ—¥å¿«æ¨‚ï¼</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(135deg, #e0f7fa 0%, #b3e5fc 100%);
      height: 100vh;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .scene {
      width: 800px;
      height: 600px;
      position: relative;
      background-color: #ffffff;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      overflow: hidden;
    }
    
    .header {
      width: 100%;
      padding: 20px 0;
      text-align: center;
      background-color: #ff7043;
      color: white;
      font-size: 2.5rem;
      font-weight: bold;
      position: relative;
      z-index: 10;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    .subheader {
      font-size: 1.5rem;
      margin-top: 5px;
    }
    
    .stage {
      position: relative;
      width: 100%;
      height: calc(100% - 90px);
      background: linear-gradient(to bottom, #bbdefb 0%, #ffffff 100%);
    }
    
    .character {
      position: absolute;
      cursor: pointer;
      transition: transform 0.3s ease;
      filter: drop-shadow(2px 4px 6px rgba(0, 0, 0, 0.2));
    }
    
    .character:hover {
      transform: scale(1.1);
    }        
    .heart {
         position: absolute;
         color: red;
         font-size: 24px;
         pointer-events: none;
         animation: float 2s ease-out forwards;
         opacity: 0;
    }

    @keyframes float {
        0% {
            transform: translateY(0) scale(0.5);
            opacity: 0;
        }
        10% {
            opacity: 1;
        }
        100% {
            transform: translateY(-100px) scale(1.5);
            opacity: 0;
        }
    }


    /* åœ“å½¢ç›¸æ¡†æ¨£å¼ */
    .character-frame {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      overflow: hidden;
      border: 3px solid white;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
      background-color: #f5f5f5;
    }
    
    .character img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    #basketball-boy {
      width: 120px;
      height: 120px;
      left: 50%;
      top: 40%;
      transform: translateX(-50%);
      z-index: 50;
    }
    
    #curly-girl {
      width: 110px;
      height: 110px;
      left: 30%;
      top: 45%;
      z-index: 40;
    }
    
    #teddy-bear {
      width: 90px;
      height: 90px;
      left: 65%;
      top: 55%;
      z-index: 30;
    }
    
    #otter {
      width: 80px;
      height: 80px;
      left: 20%;
      top: 60%;
      z-index: 20;
    }
    
    #golden-retriever {
      width: 100px;
      height: 100px;
      left: 75%;
      top: 58%;
      z-index: 15;
    }
    
    #british-cat {
      width: 70px;
      height: 70px;
      left: 85%;
      top: 65%;
      z-index: 10;
    }
    
    .cake {
      position: absolute;
      width: 120px;
      height: 120px;
      left: 50%;
      transform: translateX(-50%);
      bottom: 10%;
      cursor: pointer;
      z-index: 60;
    }
    
    .cake-frame {
      width: 100%;
      height: 100%;
      overflow: hidden;
      border-radius: 15px;
      border: 3px solid white;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }
    
    .cake img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
    
    .dialog {
      position: absolute;
      background-color: white;
      border-radius: 15px;
      padding: 10px 15px;
      max-width: 180px;
      min-width: 120px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
      font-size: 14px;
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.3s ease, transform 0.3s ease;
      text-align: center;
      z-index: 100;
      pointer-events: none;
    }
    
    .dialog:after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      border-width: 10px 10px 0;
      border-style: solid;
      border-color: white transparent transparent transparent;
    }
    
    .balloon {
      position: absolute;
      width: 100px;
      height: 130px;
      animation: float 5s infinite ease-in-out;
      z-index: 10;
    }
    
    .balloon-frame {
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
    
    .balloon img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-15px); }
    }
    
    .photo-modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
    }
    
    .modal-content {
      background-color: white;
      margin: 5% auto;
      padding: 25px;
      border-radius: 15px;
      width: 80%;
      max-width: 800px;
      max-height: 85vh;
      overflow-y: auto;
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid #eee;
    }
    
    .modal-header h2 {
      color: #ff7043;
      font-size: 1.8rem;
    }
    
    .close-button {
      color: #aaa;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      transition: color 0.2s;
    }
    
    .close-button:hover {
      color: #555;
    }
    
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 15px;
    }
    
    /* åœ“å½¢ç›¸å†Šç…§ç‰‡ */
    .photo {
      width: 100%;
      aspect-ratio: 1/1;
      background-color: #eee;
      border-radius: 50%;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.3s ease;
      border: 4px solid white;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
    }
    
    .photo:hover {
      transform: scale(1.05);
    }
    
    .photo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .confetti {
      position: absolute;
      width: 12px;
      height: 12px;
      z-index: 5;
      pointer-events: none;
    }
    
    .message-board {
      position: absolute;
      bottom: 5px;
      width: 100%;
      text-align: center;
      color: #ff7043;
      font-size: 16px;
      font-weight: bold;
      z-index: 70;
    }
    
    .music-toggle {
      position: absolute;
      bottom: 15px;
      right: 15px;
      width: 40px;
      height: 40px;
      background-color: rgba(255, 255, 255, 0.8);
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      z-index: 80;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }
    
    .music-icon {
      width: 20px;
      height: 20px;
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
    }
    
    /* ä¸Šå‚³ç…§ç‰‡èªªæ˜ */
    .photo-instructions {
      margin: 10px 0 20px;
      color: #666;
      font-size: 14px;
      line-height: 1.5;
    }
  </style>
</head>
<body>
  <div class="scene">
    <div class="header">
      ç”Ÿæ—¥å¿«æ¨‚ï¼
      <div class="subheader">4æœˆ11æ—¥</div>
    </div>
    
    <div class="stage">
      <!-- ä¸»è¦è§’è‰² - ç¾åœ¨éƒ½ä½¿ç”¨åœ“å½¢ç›¸æ¡† -->
      <div class="character" id="basketball-boy">
        <div class="character-frame">
          <img src="images/boy.png" alt="ç±ƒçƒç”·ç”Ÿ">
        </div>
      </div>
      
      <div class="character" id="curly-girl">
        <div class="character-frame">
          <img src="images/girl.png" alt="æ²é«®å¥³ç”Ÿ">
        </div>
      </div>
      
      <div class="character" id="teddy-bear">
        <div class="character-frame">
          <img src="images/bear.png" alt="ç†Šç©å¶">
        </div>
      </div>
      
      <div class="character" id="otter">
        <div class="character-frame">
          <img src="images/otter.png" alt="æµ·çº">
        </div>
      </div>
      
      <div class="character" id="golden-retriever">
        <div class="character-frame">
          <img src="images/realCAT.png" alt="é»ƒé‡‘çµçŠ¬">
        </div>
      </div>
      
      <div class="character" id="british-cat">
        <div class="character-frame">
          <img src="images/realDOG.png" alt="è‹±åœ‹çŸ­æ¯›è²“">
        </div>
      </div>
      
      <!-- è›‹ç³• -->
      <div class="cake" id="birthday-cake">
        <div class="cake-frame">
          <img src="images/cake.png" alt="ç”Ÿæ—¥è›‹ç³•">
        </div>
      </div>
      
      <!-- å°è©±æ¡† -->
      <div class="dialog" id="character-dialog"></div>
      
      <!-- æ°£çƒè£é£¾ -->
      <div class="balloon" style="left: 10%; top: 15%;">
        <div class="balloon-frame">
          <img src="images/trex.png" alt="æ°£çƒ">
        </div>
      </div>
      <div class="balloon" style="left: 85%; top: 20%; animation-delay: 1s;">
        <div class="balloon-frame">
          <img src="images/ballroomyellow.png" alt="æ°£çƒ">
        </div>
      </div>
      <div class="balloon" style="left: 20%; top: 10%; animation-delay: 2s;">
        <div class="balloon-frame">
          <img src="images/ballroom.png" alt="æ°£çƒ">
        </div>
      </div>
      <div class="balloon" style="left: 75%; top: 15%; animation-delay: 3s;">
        <div class="balloon-frame">
          <img src="images/happybirthday.png" alt="æ°£çƒ">
        </div>
      </div>
      
      <!-- è¨Šæ¯æ¿ -->
      <div class="message-board" id="message-display"></div>
      
      <!-- éŸ³æ¨‚æ§åˆ¶ -->
      <audio id="bgMusic" loop>
        <source src="music/bg.m4a" type="audio/mp4">
      </audio>
      <button id="musicButton" class="btn">æ’­æ”¾éŸ³æ¨‚</button>
      </div>
    </div>
  </div>
  
  <!-- ç…§ç‰‡é›†æ¨¡æ…‹è¦–çª— -->
  <div class="photo-modal" id="photo-gallery">
    <div class="modal-content">
      <div class="modal-header">
        <h2>ç¾å¥½å›æ†¶</h2>
        <span class="close-button" id="close-gallery">&times;</span>
      </div>
      <div class="photo-instructions">
        <p>âœ¨2024-2025 ECPOèµ°è·³ä¸–ç•Œçš„è¹¤è·¡âœ¨</p>
      </div>
      <div class="gallery">
        <div class="photo">
          <img src="C:\Users\Hsiao-Po Ku\Downloads\411\ecpot3.jpg" alt="ç…§ç‰‡ 1">
        </div>
        <div class="photo">
          <img src="C:\Users\Hsiao-Po Ku\Downloads\411\Tecpo6.jpg" alt="ç…§ç‰‡ 2">
        </div>
        <div class="photo">
          <img src="C:\Users\Hsiao-Po Ku\Downloads\411\Tecpo3.jpg" alt="ç…§ç‰‡ 3">
        </div>
        <div class="photo">
          <img src="C:\Users\Hsiao-Po Ku\Downloads\411\ecpog3.jpg" alt="ç…§ç‰‡ 4">
        </div>
        <div class="photo">
          <img src="C:\Users\Hsiao-Po Ku\Downloads\411\Tecpo7.jpg" alt="ç…§ç‰‡ 5">
        </div>
        <div class="photo">
          <img src="C:\Users\Hsiao-Po Ku\Downloads\411\ecpot6.jpg" alt="ç…§ç‰‡ 6">
        </div>
        <div class="photo">
          <img src="C:\Users\Hsiao-Po Ku\Downloads\411\Tecpo2.jpg" alt="ç…§ç‰‡ 7">
        </div>
        <div class="photo">
          <img src="C:\Users\Hsiao-Po Ku\Downloads\411\Tecpo1.jpg" alt="ç…§ç‰‡ 8">
        </div>
      </div>
    </div>
  </div>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // ç²å–å…ƒç´ 
      const basketballBoy = document.getElementById('basketball-boy');
      const curlyGirl = document.getElementById('curly-girl');
      const teddyBear = document.getElementById('teddy-bear');
      const otter = document.getElementById('otter');
      const goldenRetriever = document.getElementById('golden-retriever');
      const britishCat = document.getElementById('british-cat');
      const cake = document.getElementById('birthday-cake');
      const dialog = document.getElementById('character-dialog');
      const photoGallery = document.getElementById('photo-gallery');
      const closeGallery = document.getElementById('close-gallery');
      const messageDisplay = document.getElementById('message-display');
      const musicButton = document.getElementById('music-button');
      
      // è§’è‰²è³‡è¨Šèˆ‡å°è©±
      const characters = [
        {
          element: basketballBoy,
          name: 'ç±ƒçƒç”·ç”Ÿ',
          messages: [
            'ä»Šå¤©æ˜¯æˆ‘çš„ç”Ÿæ—¥ï¼',
            'æˆ‘æ˜¯å¤§ç‹—å‹¾ï¼',
            'æˆ‘æ˜¯æš´é¾ğŸ¦–!'
          ]
        },
        {
          element: curlyGirl,
          name: 'æ²é«®å¥³ç”Ÿ',
          messages: [
            'ç”Ÿæ—¥å¿«æ¨‚ï¼ç„ä¸­æ˜¯å¤§å·¨å·¨ï¼',
            'æ¯å¤©éƒ½è¦åƒé£½é£½ç¡é£½é£½ï¼',
            'Nettoï¼'
          ]
        },
        {
          element: teddyBear,
          name: 'ç†Šç©å¶',
          messages: [
            'ç™½èƒ–èƒ–æ„›ä½ ï¼',
            'ç”Ÿæ—¥å¿«æ¨‚ï¼æŠ±æŠ±!',
            'æˆ‘æœ€è¿‘å–œæ­¡ç¡åœ¨åœ°ä¸Š'
          ]
        },
        {
          element: otter,
          name: 'æµ·çº',
          messages: [
            'å°å°æ³¢å¸¶äº†æ¼‚äº®çš„è²æ®¼ç¥ç¦ä½ ï¼',
            'ç”Ÿæ—¥å¿«æ¨‚ï¼è¦è¨˜å¾—æŠ±æŠ±æˆ‘ï¼',
            'ç¥æˆ‘å€‘çš„ç”Ÿæ´»åƒæµ·æ´‹ä¸€æ¨£å»£é—Šç²¾å½©ï¼ğŸŒŠ'
          ]
        },
        {
          element: goldenRetriever,
          name: 'é»ƒé‡‘çµçŠ¬',
          messages: [
            'æ±ªæ±ªï¼ç”Ÿæ—¥å¿«æ¨‚ï¼',
            'æ–å°¾å·´æ…¶ç¥ä½ çš„ç‰¹åˆ¥æ—¥å­ï¼',
            'å¯ä»¥åˆ†æˆ‘ä¸€å¡Šè›‹ç³•å—ï¼Ÿæ±ªï¼ğŸ¥¹'
          ]
        },
        {
          element: britishCat,
          name: 'è‹±åœ‹çŸ­æ¯›è²“',
          messages: [
            'å–µ ğŸ˜»ğŸ§¡',
            'ç·² ç·² å–µ ç·² å–µ å–µ~ğŸ‚',
            'å–µ å–µå–µ å–µ å–µå–µğŸ˜¼ğŸ'
          ]
        }
      ];
      
      // ç”Ÿæ—¥ç¥ç¦èª
      const birthdayWishes = [
        'ç„ä¸­å¯¶è²24æ­²ç”Ÿæ—¥å¿«æ¨‚ï¼âœ¨',
        'ä½ å’Œå°æ³¢çµ±æ²»ä¸–ç•Œ856è¬å¹´äº†ï¼',
        'æˆ‘è¦åƒè›‹ç³•ğŸ‚ğŸ‘©ï¼',
        'è¦å”±ç”Ÿæ—¥å¿«æ¨‚æ­Œ!é‚„è¦å¹è Ÿç‡­ğŸ•¯ï¸!',
        'ç¥æˆ‘çš„å¯¶è²ç”Ÿæ—¥å¿«æ¨‚ï¼Œé¡˜ä½ æ‰€æœ‰çš„é¡˜æœ›éƒ½èƒ½å¯¦ç¾ğŸ¥³'
      ];
      
      // é¡¯ç¤ºè§’è‰²å°è©±
      function showDialog(character, message) {
        const charRect = character.element.getBoundingClientRect();
        const sceneRect = document.querySelector('.scene').getBoundingClientRect();
        
        dialog.textContent = message;
        dialog.style.opacity = '1';
        dialog.style.transform = 'translateY(0)';
        
        // ç›¸å°æ–¼å ´æ™¯å®šä½å°è©±æ¡†
        const leftPos = charRect.left - sceneRect.left + (charRect.width / 2) - (dialog.offsetWidth / 2);
        const topPos = charRect.top - sceneRect.top - dialog.offsetHeight - 10;
        
        dialog.style.left = `${Math.max(10, Math.min(sceneRect.width - dialog.offsetWidth - 10, leftPos))}px`;
        dialog.style.top = `${Math.max(10, topPos)}px`;
        
        // 3ç§’å¾Œéš±è—å°è©±æ¡†
        setTimeout(() => {
          dialog.style.opacity = '0';
          dialog.style.transform = 'translateY(10px)';
        }, 3000);
      }
      
      // éš¨æ©Ÿé¸æ“‡ä¸€å€‹è¨Šæ¯
      function getRandomMessage(messages) {
        return messages[Math.floor(Math.random() * messages.length)];
      }

     // å‰µå»ºæ„›å¿ƒæ•ˆæœ
      function createHearts(e) {
        const numHearts = Math.floor(Math.random() * 5) + 5;
        const container = document.getElementById('container');
      
        for (let i = 0; i < numHearts; i++) {
          const heart = document.createElement('div');
          heart.className = 'heart';
          heart.innerHTML = 'â¤ï¸';
          heart.style.left = (e.clientX - container.getBoundingClientRect().left) + 'px';
          heart.style.top = (e.clientY - container.getBoundingClientRect().top) + 'px';
          container.appendChild(heart);
        }
      
        // æ’­æ”¾éŸ³æ¨‚æ•ˆæœï¼ˆé€™è£¡ç”¨è¦–è¦ºæ•ˆæœä»£æ›¿ï¼‰
        document.addEventListener('DOMContentLoaded', function() {
          const musicButton = document.getElementById('musicButton');
          const bgMusic = document.getElementById('bgMusic');
          let isPlaying = false;

          musicButton.addEventListener('click', () => {
            if (isPlaying) {
              bgMusic.pause();
              musicButton.textContent = 'æ’­æ”¾éŸ³æ¨‚';
              isPlaying = false;
            } else {
              bgMusic.play()
              .then(() => {
                musicButton.textContent = 'æš«åœéŸ³æ¨‚';
                isPlaying = true;
              })
              .catch(error => {
                console.error('éŸ³æ¨‚æ’­æ”¾å¤±æ•—:', error);
                alert('éŸ³æ¨‚æ’­æ”¾å¤±æ•—ï¼Œè«‹ç¢ºèªæª”æ¡ˆè·¯å¾‘æ˜¯å¦æ­£ç¢º');
              });
            }
          });
        });

  
        for (let i = 0; i < 20; i++) {
          const note = document.createElement('div');
          note.textContent = musicNotes[Math.floor(Math.random() * musicNotes.length)];
          note.style.position = 'absolute';
          note.style.fontSize = `${Math.random() * 20 + 15}px`;
          note.style.left = `${Math.random() * window.innerWidth}px`;
          note.style.top = `${window.innerHeight}px`;
          note.style.opacity = 1;
    
          document.body.appendChild(note);
    
         // è®“éŸ³ç¬¦ä¸Šå‡ä¸¦æ¶ˆå¤±
         const rise = () => {
           const top = parseFloat(note.style.top);
           const newTop = top - 3;
           const opacity = parseFloat(note.style.opacity);
           const newOpacity = top < window.innerHeight - 200 ? opacity - 0.01 : opacity;
      
           note.style.top = `${newTop}px`;
           note.style.left = `${parseFloat(note.style.left) + (Math.random() * 2 - 1)}px`;
           note.style.transform = `rotate(${Math.random() * 30 - 15}deg)`;
           note.style.opacity = newOpacity;
      
           if (newOpacity > 0 && newTop > 0) {
            requestAnimationFrame(rise);
          } else {
            note.remove();
          }
        };
    
      // å»¶é²é–‹å§‹ä¸Šå‡å‹•ç•«ï¼ˆæ¯å€‹éŸ³ç¬¦æœ‰ä¸åŒçš„å»¶é²ï¼‰
          setTimeout(() => {
            requestAnimationFrame(rise);
          }, Math.random() * 5000);
        }
      }
      // é–‹å§‹è·³èˆå‹•ç•«
       function startDancing(element) {
        element.classList.add('dancing');
        setTimeout(() => {
          element.classList.remove('dancing');
        }, 2000);
      }

      // è›‹ç³•é»æ“Šæ•ˆæœ
       function setupCake() {
        const cake = document.getElementById('cake');
        const container = document.getElementById('container');
        
        cake.addEventListener('click', () => {
        
            // å‰µå»ºç…™èŠ±æ•ˆæœ
            createFireworks();
        
            // é¡¯ç¤ºç”Ÿæ—¥ç¥ç¦
            showBirthdayMessage();
        
          // é»æ“Šè›‹ç³•æ™‚ä¹Ÿç”¢ç”ŸéŸ³ç¬¦æ•ˆæœ
          const event = {
            clientX: cake.getBoundingClientRect().left + cake.offsetWidth / 2,
            clientY: cake.getBoundingClientRect().top + cake.offsetHeight / 2
          };
          createHearts(event);
        });
      }

      // å‰µå»ºç…™èŠ±æ•ˆæœ
        function createFireworks() {
            const container = document.getElementById('container');
            const colors = ['#FF5252', '#FF4081', '#E040FB', '#7C4DFF', '#536DFE', '#448AFF', '#40C4FF', '#18FFFF', '#64FFDA', '#69F0AE', '#B2FF59', '#EEFF41', '#FFFF00', '#FFD740', '#FFAB40', '#FF6E40'];
            for (let i = 0; i < 100; i++) {
              const confetti = document.createElement('div');
              confetti.className = 'confetti';
              confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
              confetti.style.left = (Math.random() * 100) + '%';
              confetti.style.top = (Math.random() * 100) + '%';
              container.appendChild(confetti);
        
              // å‹•ç•«
              const angle = Math.random() * Math.PI * 2;
              const distance = Math.random() * 300 + 50;
              const duration = Math.random() * 2 + 1;
        
              confetti.animate([
                { 
                    transform: 'translate(0, 0) rotate(0deg) scale(0)',
                    opacity: 0
                },
                {
                    transform: `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px) rotate(${Math.random() * 360}deg) scale(${Math.random() * 2 + 0.5})`,
                    opacity: 1
                },
                {
                    transform: `translate(${Math.cos(angle) * (distance + 50)}px, ${Math.sin(angle) * (distance + 100)}px) rotate(${Math.random() * 720}deg) scale(0)`,
                    opacity: 0
                }
            ], {
                duration: duration * 1000,
                easing: 'cubic-bezier(0.1, 0.8, 0.2, 1)',
                fill: 'forwards'
            });
        
            // å‹•ç•«çµæŸå¾Œç§»é™¤
            setTimeout(() => {
              confetti.remove();
            }, duration * 1000);
          }
        }
    
    
         // é¡¯ç¤ºç”Ÿæ—¥ç¥ç¦
        function showBirthdayMessage() {
            const container = document.getElementById('container');
            const message = document.createElement('div');
            message.className = 'surprise';
            message.style.position = 'absolute';
            message.style.top = '40%';
            message.style.left = '50%';
            message.style.transform = 'translate(-50%, -50%)';
            message.style.fontSize = '36px';
            message.style.fontWeight = 'bold';
            message.style.color = '#FF6B6B';
            message.style.textShadow = '0 0 10px #FFF, 0 0 20px #FFF, 0 0 30px #FF6B6B';
            message.style.textAlign = 'center';
            message.style.whiteSpace = 'nowrap';
            message.style.zIndex = '100';
            message.innerHTML = 'ç”Ÿæ—¥å¿«æ¨‚ï¼è¦ªæ„›çš„ç”·å‹<br>4æœˆ11æ—¥';
            container.appendChild(message);
    
            // é¡¯ç¤ºå‹•ç•«
            message.animate([
                { transform: 'translate(-50%, -50%) scale(0)', opacity: 0 },
                { transform: 'translate(-50%, -50%) scale(1.2)', opacity: 1 },
                { transform: 'translate(-50%, -50%) scale(1)', opacity: 1 }
            ], {
                duration: 1000,
                easing: 'cubic-bezier(0.1, 0.8, 0.2, 1)',
                fill: 'forwards'
            });
    
            // 3ç§’å¾Œæ·¡å‡º
            setTimeout(() => {
               message.animate([
                   { opacity: 1 },
                   { opacity: 0 }
               ], {
                   duration: 1000,
                   fill: 'forwards'
               });
        
              setTimeout(() => {
                   message.remove();
              }, 1000);
          }, 3000);
        }
      // å‰µå»ºç´™å±‘æ•ˆæœ
      function createConfetti() {
        const colors = ['#ff7043', '#42a5f5', '#66bb6a', '#ffca28', '#ab47bc'];
        const confettiCount = 50;
        const scene = document.querySelector('.scene');
        
        for (let i = 0; i < confettiCount; i++) {
          const confetti = document.createElement('div');
          confetti.className = 'confetti';
          
          // éš¨æ©Ÿè¨­å®šç´™å±‘çš„å½¢ç‹€å’Œé¡è‰²
          const randomColor = colors[Math.floor(Math.random() * colors.length)];
          confetti.style.backgroundColor = randomColor;
          
          // éš¨æ©Ÿå½¢ç‹€ï¼šçŸ©å½¢æˆ–åœ“å½¢
          if (Math.random() > 0.5) {
            confetti.style.borderRadius = '50%';
          }
          
          // åˆå§‹ä½ç½®
          confetti.style.left = `${Math.random() * 100}%`;
          confetti.style.top = '0';
          
          // æ·»åŠ åˆ°å ´æ™¯
          scene.appendChild(confetti);
          
          // ç´™å±‘é£„è½å‹•ç•«
          animateConfetti(confetti);
        }
      }
      
      // ç´™å±‘é£„è½å‹•ç•«
      function animateConfetti(confetti) {
        const duration = 3 + Math.random() * 3;
        const sceneHeight = document.querySelector('.scene').offsetHeight;
        
        confetti.style.transition = `top ${duration}s linear, left ${duration}s ease-in-out, transform ${duration/4}s linear`;
        
        // éš¨æ©Ÿæ—‹è½‰
        confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
        
        setTimeout(() => {
          confetti.style.top = `${sceneHeight}px`;
          confetti.style.left = `${parseFloat(confetti.style.left) + (Math.random() * 40 - 20)}%`;
          confetti.style.transform = `rotate(${Math.random() * 360 + 180}deg)`;
        }, 50);
        
        // å‹•ç•«çµæŸå¾Œç§»é™¤
        setTimeout(() => {
          confetti.remove();
        }, duration * 1000);
      }
      
      // è¨­ç½®è§’è‰²äº’å‹•
      characters.forEach(character => {
        // é»æ“Šè§’è‰²é¡¯ç¤ºå°è©±
        character.element.addEventListener('click', () => {
          showDialog(character, getRandomMessage(character.messages));
        });
        
        // ç‚ºè§’è‰²æ·»åŠ éš¨æ©Ÿç§»å‹•
        const randomMove = () => {
          const stage = document.querySelector('.stage');
          const stageWidth = stage.offsetWidth;
          const stageHeight = stage.offsetHeight;
          const charWidth = character.element.offsetWidth;
          const charHeight = character.element.offsetHeight;
          
          // ç¢ºä¿åœ¨ç•Œé¢ç¯„åœå…§
          const newX = Math.max(10, Math.min(stageWidth - charWidth - 10, Math.random() * stageWidth));
          const newY = Math.max(10, Math.min(stageHeight - charHeight - 50, 100 + Math.random() * (stageHeight - 200)));
          
          // ä½¿ç”¨CSSè½‰æ›è€Œä¸æ˜¯ç›´æ¥æ”¹è®Šä½ç½®
          character.element.style.transition = 'left 2s ease, top 2s ease';
          character.element.style.left = `${newX}px`;
          character.element.style.top = `${newY}px`;
        };
        
        // è¨­ç½®éš¨æ©Ÿä½ç½®
        setTimeout(() => randomMove(), 1000);
        
        // æ¯éš”ä¸€æ®µæ™‚é–“éš¨æ©Ÿç§»å‹•
        setInterval(randomMove, 5000 + Math.random() * 5000);
      });
      
      // è§’è‰²éš¨æ©Ÿäº’å‹•
      function randomInteraction() {
        const randomIndex1 = Math.floor(Math.random() * characters.length);
        let randomIndex2 = Math.floor(Math.random() * characters.length);
        // ç¢ºä¿ä¸æ˜¯åŒä¸€å€‹è§’è‰²
        while(randomIndex2 === randomIndex1) {
          randomIndex2 = Math.floor(Math.random() * characters.length);
        }
        
        const char1 = characters[randomIndex1];
        const char2 = characters[randomIndex2];
        
        // è®“å…©å€‹è§’è‰²é è¿‘
        const moveNear = () => {
          const stage = document.querySelector('.stage');
          const midX = Math.random() * (stage.offsetWidth - 200) + 100;
          const midY = Math.random() * (stage.offsetHeight - 300) + 150;
          
          char1.element.style.transition = 'left 1.5s ease, top 1.5s ease';
          char2.element.style.transition = 'left 1.5s ease, top 1.5s ease';
          
          char1.element.style.left = `${midX - 70}px`;
          char1.element.style.top = `${midY}px`;
          
          char2.element.style.left = `${midX + 70}px`;
          char2.element.style.top = `${midY}px`;
        };
        
        moveNear();
        
        // è§’è‰²äº’å‹•å¾Œé¡¯ç¤ºå°è©±
        setTimeout(() => {
          showDialog(char1, getRandomMessage(char1.messages));
        }, 2000);
        
        setTimeout(() => {
          showDialog(char2, getRandomMessage(char2.messages));
        }, 5000);
      }
      
      // è¨­ç½®å®šæ™‚äº’å‹•
      setInterval(randomInteraction, 15000);
      
      // è›‹ç³•é»æ“Šæ•ˆæœ
      cake.addEventListener('click', () => {
        createConfetti();
        const wish = getRandomMessage(birthdayWishes);
        messageDisplay.textContent = wish;
        
        // é¡¯ç¤ºè¨Šæ¯3ç§’å¾Œæ¸…é™¤
        setTimeout(() => {
          messageDisplay.textContent = '';
        }, 3000);
        
        // é¡¯ç¤ºç…§ç‰‡é›†
        setTimeout(() => {
          photoGallery.style.display = 'block';
        }, 1000);
      });
      
      // é—œé–‰ç…§ç‰‡é›†
      closeGallery.addEventListener('click', () => {
        photoGallery.style.display = 'none';
      });
      
      // é»æ“Šç…§ç‰‡é›†èƒŒæ™¯é—œé–‰
      photoGallery.addEventListener('click', (e) => {
        if (e.target === photoGallery) {
          photoGallery.style.display = 'none';
        }
      });
      
      // éŸ³æ¨‚æŒ‰éˆ•åŠŸèƒ½ï¼ˆæ¨¡æ“¬ï¼‰
      musicButton.addEventListener('click', () => {
        // å¯¦éš›æ‡‰ç”¨ä¸­å¯ä»¥åœ¨é€™è£¡æ·»åŠ éŸ³æ¨‚æ’­æ”¾åŠŸèƒ½
        alert('é€™è£¡å¯ä»¥æ·»åŠ èƒŒæ™¯éŸ³æ¨‚åŠŸèƒ½ï¼');
      });
      
      // åˆå§‹æ¶ˆæ¯é¡¯ç¤º
      setTimeout(() => {
        messageDisplay.textContent = 'é»æ“Šè§’è‰²å’Œè›‹ç³•ä¾†äº’å‹•ï¼';
        
        setTimeout(() => {
          messageDisplay.textContent = '';
        }, 4000);
      }, 1000);
    });
  </script>
</body>
</html>
